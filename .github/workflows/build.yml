name: deploy

on:
 push:
  branches: [$default-branch]
 pull_request:
  branches: [$default-branch]

jobs:
 build:
  runs-on: ubuntu-latest

  strategy:
   matrix:
    node-version: [12.x, 14.x, 16.x]
    # See supported Node.js release schedule at https://nodejs.org/en/about/releases/

  steps:
   - uses: actions/checkout@v3

   - name: Use Node.js ${{ matrix.node-version }}
     uses: actions/setup-node@v3
     with:
      node-version: ${{ matrix.node-version }}

   - name: Install and Build
   - uses: yarn && yarn build && yarn export

   - name: Deploy
   - uses: JamesIves/github-pages-deploy-action@3.7.1
   - with:
     GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
     BRANCH: gh-pages
     FOLDER: build
     CLEAN: true
